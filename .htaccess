#
# Browser Caching
# http://christianzehnter.com/blog/anleitung-wie-man-einen-100-100-google-pagespeed-erreicht
#
<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresByType text/css "access plus 1 week"
  ExpiresByType text/javascript "access plus 1 year"
  ExpiresByType text/html "access plus 1 seconds"
  ExpiresByType application/javascript "access plus 1 year"
  ExpiresByType application/x-javascript "access plus 1 year"
  ExpiresByType application/xhtml-xml "access plus 600 seconds"
  ExpiresByType image/gif "access plus 1 year"
  ExpiresByType image/jpeg "access plus 1 year"
  ExpiresByType image/png "access plus 1 year"
  ExpiresByType image/webp "access plus 1 year"
  ExpiresByType image/avif "access plus 1 year"
  ExpiresByType image/x-icon "access plus 1 year"
  ExpiresByType image/svg+xml "access plus 1 year"
</IfModule>

<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE application/atom+xml \
    application/javascript \
    application/json \
    application/rss+xml \
    application/vnd.ms-fontobject \
    application/x-font-ttf \
    application/xhtml+xml \
    application/xml \
    font/opentype \
    image/svg+xml \
    image/x-icon \
    text/css \
    text/html \
    text/plain \
    text/x-component \
    text/xml
</IfModule>

ErrorDocument 404 /404.html
 
#
# Redirects
#

# BEGIN Rules

# Redirect all requests with HTTP_HOST != florian.latzel.io 
# to florian.latzel.io
RewriteCond %{HTTP_HOST} !^florian\.latzel\.io$
RewriteRule ^(.*)$ https://florian.latzel.io/$1 [L,R=301]

# Redirect legacy urls
RedirectMatch 301 ^/blog/(.*)$ /blog.html
RedirectMatch 301 ^/taxonomy/term/\d+$ /themen.html
RedirectMatch 301 ^/taxonomy/term/\d+/\d+$ /themen.html

# Redirect tag urls 
#RedirectMatch 301 ^/tags/([^/]+)/index.html$ /thema/$1/index.html
#RedirectMatch 301 ^/tags/([^/]+)\.html$ /thema/$1/index.html
#RedirectMatch 301 ^/tags/([^/]+)/$ /thema/$1/index.html
#RedirectMatch 301 ^/tags/([^/]+)$ /thema/$1/index.html
#RedirectMatch 301 ^/tags/(.*)/page/\d+/$ /thema/$1/index.html
#RedirectMatch 301 ^/tags/(.*)/page/\d+/index.html$ /thema/$1/index.html

# Feed
RedirectMatch 301 ^/taxonomy/term/(.*)/feed$ /feed.xml
Redirect 301 /rss.xml /feed.xml
Redirect 301 /blogs/floh/feed /feed.xml

# Sitemap
RedirectMatch 301 ^/sitemap$ /sitemap.xml
RedirectMatch 301 /sitemap.txt /sitemap.xml

# END Rules 

# BEGIN Book pages
 
Redirect 301 /book/export/html/667 /gnupg-micro-howto.html
RedirectMatch 301 /gnupg-micro-howto/(.*) /gnupg-micro-howto.html
Redirect 301 /book/export/html/978 /git-gitosis-gitweb-the-debian-way.html
RedirectMatch 301 /git-gitosis-gitweb-the-debian-way/(.*) /git-gitosis-gitweb-the-debian-way.html
Redirect 301 /book/export/html/520 /drupal-6-multisiteumgebung-mit-postgresql-unter-debian-4.html
RedirectMatch 301 /drupal-6-multisiteumgebung-mit-postgresql-unter-debian-4/(.*) /drupal-6-multisiteumgebung-mit-postgresql-unter-debian-4.html

# END Book pages 

# BEGIN misc

Redirect 301 /2020/05/10/50km-wanderung-burg-opladen-bergischer-weg-etappe-4-landrat-lucas-weg.html /wanderung-bergischer-weg-etappe-4-landrat-lucas-weg.html
Redirect 301 /2023/01/14/metaforum-summercamp-2022.html /metaforum-summercamp-2022.html
Redirect 301 /2023/01/16/hallo-coaches.html /hallo-coaches.html
Redirect 301 /2022/03/31/nlp-practitioner.html /nlp-practitioner.html 
Redirect 301 /angebot/coach-and-walk.html  /coach-and-walk.html
Redirect 301 /angebot/coaching.html  /coaching.html
Redirect 301 /angebot/wildnistraining.html /wildnistraining.html 

# END misc

