#
# Browser Caching
# http://christianzehnter.com/blog/anleitung-wie-man-einen-100-100-google-pagespeed-erreicht
#
<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresByType text/css "access plus 1 week"
  ExpiresByType text/javascript "access plus 1 year"
  ExpiresByType text/html "access plus 1 seconds"
  ExpiresByType application/javascript "access plus 1 year"
  ExpiresByType application/x-javascript "access plus 1 year"
  ExpiresByType application/xhtml-xml "access plus 600 seconds"
  ExpiresByType image/gif "access plus 1 year"
  ExpiresByType image/jpeg "access plus 1 year"
  ExpiresByType image/png "access plus 1 year"
  ExpiresByType image/webp "access plus 1 year"
  ExpiresByType image/avif "access plus 1 year"
  ExpiresByType image/x-icon "access plus 1 year"
  ExpiresByType image/svg+xml "access plus 1 year"
</IfModule>

<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE application/atom+xml \
    application/javascript \
    application/json \
    application/rss+xml \
    application/vnd.ms-fontobject \
    application/x-font-ttf \
    application/xhtml+xml \
    application/xml \
    font/opentype \
    image/svg+xml \
    image/x-icon \
    text/css \
    text/html \
    text/plain \
    text/x-component \
    text/xml
</IfModule>
 
#
# Redirects
#

# BEGIN Rules

# Redirect all requests with HTTP_HOST != florian.latzel.io 
# to florian.latzel.io
RewriteCond %{HTTP_HOST} !^florian\.latzel\.io$
RewriteRule ^(.*)$ https://florian.latzel.io/$1 [L,R=301]

# Redirect legacy urls
RedirectMatch 301 ^/blog/(.*)$ /$1
RedirectMatch 301 ^/taxonomy/term/\d+$ /themen.html
RedirectMatch 301 ^/taxonomy/term/\d+/\d+$ /themen.html
RedirectMatch 301 ^/taxonomy/term/(.*)/feed$ /feed.xml

# Redirect tag urls 
RedirectMatch 301 ^/tags/([^/]+)/index.html$ /thema/$1/index.html
RedirectMatch 301 ^/tags/([^/]+)\.html$ /thema/$1/index.html
RedirectMatch 301 ^/tags/([^/]+)/$ /thema/$1/index.html
RedirectMatch 301 ^/tags/([^/]+)$ /thema/$1/index.html
RedirectMatch 301 ^/tags/(.*)/page/\d+/$ /thema/$1/index.html
RedirectMatch 301 ^/tags/(.*)/page/\d+/index.html$ /thema/$1/index.html

# Canonical urls ends with index.html
# RedirectMatch 301 ^/thema/([^/]+)/$ /thema/$1/index.html
# RedirectMatch 301 ^/thema/([^/]+)$ /thema/$1/index.html

# Feed
Redirect 301 /rss.xml /feed.xml
Redirect 301 /blogs/floh/feed /feed.xml

# Sitemap
RedirectMatch 301 ^/sitemap$ /sitemap.xml
RedirectMatch 301 /sitemap.txt /sitemap.xml

# END Rules 

# BEGIN Book pages

Redirect 301 /book/export/html/667 /gnupg-micro-howto.html
RedirectMatch 301 /gnupg-micro-howto/(.*) /gnupg-micro-howto.html
Redirect 301 /book/export/html/978 /git-gitosis-gitweb-the-debian-way.html
RedirectMatch 301 /git-gitosis-gitweb-the-debian-way/(.*) /git-gitosis-gitweb-the-debian-way.html
Redirect 301 /book/export/html/520 /drupal-6-multisiteumgebung-mit-postgresql-unter-debian-4.html
RedirectMatch 301 /drupal-6-multisiteumgebung-mit-postgresql-unter-debian-4/(.*) /drupal-6-multisiteumgebung-mit-postgresql-unter-debian-4.html

# END Book pages 

# BEGIN misc

Redirect 301 /php-codesniffer-und-php-mess-detector-mit-syntastic-in-vim-integrieren /2016/03/13/php_codesniffer-und-php-mess-detector-mit-syntastic-in-vim-integrieren.html 
Redirect 301 /php-properties-klassenvariablen-doxygen-dokumentieren /2014/10/10/php-properties-klassenvariablen-in-doxygen-dokumentieren.html
Redirect 301 /ein-experiment-drupalcamp-goes-barcamp /2018/03/27/ein-experiment-drupalcamp-ruhr-goes-barcamp.html 
Redirect 301 /scrum-starter-kit /2018/03/03/scrum-starter-kit.html
Redirect 301 /ueberpruefung-von-ssl-zertifikaten-bei-wget-und-curl-ignorieren /2015/03/01/ueberprfung-von-ssl-zertifikaten-bei-wget-und-curl-ignorieren.html
Redirect 301 /pear-phpunit-composer-und-drupal /2015/02/28/pear-phpunit-de-composer-und-drupal.html
Redirect 301 /blog/2014/11/26/svn-ueber-ssh-unter-linux-username-bei-svn-checkout-angeben.html /2014/11/26/svnssh-unter-linux-username-bei-svn-checkout-angeben.html
Redirect 301 /autocompletition-fuer-drush-aktivieren /2013/04/21/autocompletition-fuer-drush-aktivieren.html
Redirect 301 /2019/04/05/daily-scrum-daily-questions.html /2019/04/05/daily-scrum-fragen.html
Redirect 301 /agile-scrum-lean-kanban-events-koeln-bonn-duesseldorf-umgebung.html /agile-meetups-events-koeln-nrw.html
Redirect 301 /2016-10-29-agile-scrum-lean-und-kanban-events-in-kln-bonn-dsseldorf-und-umgebung /agile-meetups-events-koeln-nrw.html
Redirect 301 /eine-einfuehrung-scrum-vortrag-auf-dem-drupalcamp-muenchen-2016.html /scrum-45-minuten-drupalcamp-muenchen-2016.html
Redirect 301 /copy-n-paste-bei-gpg-passwoertern-und-pinentry /2015/11/14/copy-n-paste-bei-gpg-passwoertern-und-pinentry.html
Redirect 301 /2009/02/20/drush-mm-adminrole-workaround-und-tabs-in-firefox.html /2009/02/20/drush_mm-adminrole-workaround-und-tabs-in-firefox.html
Redirect 301 /drupal-und-apache-2-4-x-unter-debian-testing-jessie /2014/10/20/drupal-und-apache-2-4-x-unter-debian-testing-jessie.html
Redirect 301 /2012/10/16/hnlichkeiten-in-sql-drupal-db-query-like.html /2012/10/16/aehnlichkeiten-in-sql-drupal-db_query-like.html
Redirect 301 /2009/12/08/drush-und-mulisite-drush-multi-dcvie-2009.html /2009/12/08/drush-und-multisite-drush_multi-dcvie-2009.html
Redirect 301 /2011/06/15/drupal-6-x-drupal-7-x-scratching-the-surface.html /2011/06/15/drupal-6-x-drupal-7-x-scratching-the-surface-drupal-user-group-kln-bonn.html
Redirect 301 /2008/10/03/koeln-muelheim-net-herzlichen-glueckwunsch-nachtraeglich-zum-dritten.html /2008/10/03/kln-mlheim-net-herzlichen-glckwunsch-nachtrglich-zum-dritten.html
Redirect 301 /tags/drupalcamp-ruhr/index.html /thema/drupalcamp/
Redirect 301 /2020/04/07/responsive-image.html /2020/04/07/co2-sparen-responsive-images-lazyload-jekyll.html
Redirect 301 /2016-03-01-neues-aus-der-scheinwelt-professional-scrum-master-i-psm1 /neues-aus-der-scheinwelt-professional-scrum-master-i-psm1.html
Redirect 301 /scrum-master/ /thema/scrum-master/
Redirect 301 /thema/opensource/ /thema/open-source/ 
Redirect 301 /2010/12/11/arbeit-sparen-mit-cluster-ssh.html /2010/12/10/arbeit-sparen-mit-cluster-ssh.html
Redirect 301 /2009/12/08/drush-und-multisite-drush-multi-dcvie-2009.html /2009/12/08/drush-und-multisite-drush_multi-dcvie-2009.html

Redirect 301 /kontakt /kontakt.html
Redirect 301 /contact /kontakt.html
Redirect 301 /archiv.html /blog.html
Redirect 301 /partner.html /ueber-mich.html#wegbegleiter
Redirect 301 /angebot/coach-and-walk /angebot/coach-and-walk.html
Redirect 301 /angebot/coaching /angebot/coaching.html
Redirect 301 /wildnistraining.html /angebot/wildnistraining.html

# END misc

# Temp: Umlaute
Redirect 301 /tags/scrumtisch-koeln/index.html /thema/scrumtisch-koln/index.html
Redirect 301 /tags/duesseldorf/index.html /thema/dusseldorf/index.html
Redirect 301 /tags/koeln/index.html /thema/koln/index.html
Redirect 301 /tags/muellem/index.html /thema/mullem/index.html
